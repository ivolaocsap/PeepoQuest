{"ast":null,"code":"import _slicedToArray from\"/Users/ivopascoal/Desktop/cuffies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from'react';import iconDragon from\"../assets/img/icon-dragon.svg\";import iconDragonHome from\"../assets/img/ic-dragon-home.svg\";import iconMiner from\"../assets/img/icon-miner.svg\";import iconMinerHome from\"../assets/img/ic-miner-home.svg\";import{jsx as _jsx}from\"react/jsx-runtime\";var images=[iconDragon,iconMiner,iconDragonHome,iconMinerHome];var load=function load(url){return new Promise(function(resolve){var img=new Image();img.onload=function(){return resolve();};img.onerror=function(){return resolve();};img.src=url;});};var loadAll=function loadAll(urls){return Promise.all(urls.map(load));};var timeout=function timeout(ms){return new Promise(function(resolve){setTimeout(resolve,ms);});};export var withPreload=function withPreload(Component,time){return function(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loaded=_useState2[0],setLoaded=_useState2[1];useEffect(function(){Promise.race([loadAll(images),timeout(time)]).then(function(){setLoaded(true);});},[]);if(!loaded){return/*#__PURE__*/_jsx(\"div\",{className:\"initial-loading\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/burning.gif\"})});}return/*#__PURE__*/_jsx(Component,{});};};","map":{"version":3,"sources":["/Users/ivopascoal/Desktop/cuffies/src/hooks/usePreload.tsx"],"names":["useEffect","useState","images","iconDragon","iconMiner","iconDragonHome","iconMinerHome","load","url","Promise","resolve","img","Image","onload","onerror","src","loadAll","urls","all","map","timeout","ms","setTimeout","withPreload","Component","time","loaded","setLoaded","race","then"],"mappings":"wJAAA,OAAuBA,SAAvB,CAAkCC,QAAlC,KAAkD,OAAlD,C,6QAMA,GAAMC,CAAAA,MAAM,CAAG,CAACC,UAAD,CAAaC,SAAb,CAAwBC,cAAxB,CAAwCC,aAAxC,CAAf,CAEA,GAAMC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,CAACC,GAAD,CAAgC,CAC3C,MAAO,IAAIC,CAAAA,OAAJ,CAAY,SAACC,OAAD,CAAa,CAC9B,GAAMC,CAAAA,GAAG,CAAG,GAAIC,CAAAA,KAAJ,EAAZ,CACAD,GAAG,CAACE,MAAJ,CAAa,iBAAMH,CAAAA,OAAO,EAAb,EAAb,CACAC,GAAG,CAACG,OAAJ,CAAc,iBAAMJ,CAAAA,OAAO,EAAb,EAAd,CACAC,GAAG,CAACI,GAAJ,CAAUP,GAAV,CACD,CALM,CAAP,CAMD,CAPD,CASA,GAAMQ,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAACC,IAAD,QAAoBR,CAAAA,OAAO,CAACS,GAAR,CAAYD,IAAI,CAACE,GAAL,CAASZ,IAAT,CAAZ,CAApB,EAAhB,CAEA,GAAMa,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAACC,EAAD,QACd,IAAIZ,CAAAA,OAAJ,CAAY,SAACC,OAAD,CAAa,CACvBY,UAAU,CAACZ,OAAD,CAAUW,EAAV,CAAV,CACD,CAFD,CADc,EAAhB,CAKA,MAAO,IAAME,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,SAAD,CAAsBC,IAAtB,CAAiD,CAC1E,MAAO,WAAoB,CACzB,cAA4BxB,QAAQ,CAAC,KAAD,CAApC,wCAAOyB,MAAP,eAAeC,SAAf,eACA3B,SAAS,CAAC,UAAM,CACdS,OAAO,CAACmB,IAAR,CAAa,CAACZ,OAAO,CAACd,MAAD,CAAR,CAAkBkB,OAAO,CAACK,IAAD,CAAzB,CAAb,EAA+CI,IAA/C,CAAoD,UAAM,CACxDF,SAAS,CAAC,IAAD,CAAT,CACD,CAFD,EAGD,CAJQ,CAIN,EAJM,CAAT,CAMA,GAAI,CAACD,MAAL,CAAa,CACX,mBACE,YAAK,SAAS,CAAC,iBAAf,uBACE,YAAK,GAAG,CAAC,cAAT,EADF,EADF,CAKD,CAED,mBAAO,KAAC,SAAD,IAAP,CACD,CAjBD,CAkBD,CAnBM","sourcesContent":["import { ReactElement, useEffect, useState } from 'react';\nimport iconDragon from '../assets/img/icon-dragon.svg';\nimport iconDragonHome from '../assets/img/ic-dragon-home.svg';\nimport iconMiner from '../assets/img/icon-miner.svg';\nimport iconMinerHome from '../assets/img/ic-miner-home.svg';\n\nconst images = [iconDragon, iconMiner, iconDragonHome, iconMinerHome];\n\nconst load = (url: string): Promise<void> => {\n  return new Promise((resolve) => {\n    const img = new Image();\n    img.onload = () => resolve();\n    img.onerror = () => resolve();\n    img.src = url;\n  });\n};\n\nconst loadAll = (urls: string[]) => Promise.all(urls.map(load));\n\nconst timeout = (ms: number) =>\n  new Promise((resolve) => {\n    setTimeout(resolve, ms);\n  });\n\nexport const withPreload = (Component: React.FC, time: number): React.FC => {\n  return (): ReactElement => {\n    const [loaded, setLoaded] = useState(false);\n    useEffect(() => {\n      Promise.race([loadAll(images), timeout(time)]).then(() => {\n        setLoaded(true);\n      });\n    }, []);\n\n    if (!loaded) {\n      return (\n        <div className=\"initial-loading\">\n          <img src=\"/burning.gif\" />\n        </div>\n      );\n    }\n\n    return <Component />;\n  };\n};\n"]},"metadata":{},"sourceType":"module"}