{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/ivopascoal/Desktop/cuffies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _regeneratorRuntime from\"/Users/ivopascoal/Desktop/cuffies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/ivopascoal/Desktop/cuffies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"/Users/ivopascoal/Desktop/cuffies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/Users/ivopascoal/Desktop/cuffies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/ivopascoal/Desktop/cuffies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8,_templateObject9,_templateObject10,_templateObject11,_templateObject12,_templateObject13,_templateObject14,_templateObject15,_templateObject16,_templateObject17,_templateObject18,_templateObject19,_templateObject20,_templateObject21,_templateObject22,_templateObject23,_templateObject24,_templateObject25,_templateObject26,_templateObject27,_templateObject28,_templateObject29,_templateObject30;import React,{useCallback,useEffect,useMemo,useState}from'react';import{BigNumber}from'@ethersproject/bignumber';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faShoppingCart}from\"@fortawesome/free-solid-svg-icons\";import styled,{keyframes}from'styled-components';import Container from'src/components/Container';import{useConfiguration}from'src/contexts/ConfigProvider/ConfigProvider';import useApprove,{ApprovalState}from'src/hooks/useApprove';import useDiamondHand from'src/hooks/useDiamondHand';import useTryConnect from'src/hooks/useTryConnect';import theme from'src/theme';import SelectTicketItem from'./SelectTicketItem';import TicketImg from\"src/assets/img/ticket-white.svg\";import Page from'src/components/Page';import{flatten}from'src/utils/objects';import useHandleTransactionReceipt from'src/hooks/useHandleTransactionReceipt';import NumberDisplay from'src/components/Number';import{ExternalLinks}from'src/config';import{useTokenBalance}from'src/contexts/AccountBalanceProvider/AccountBalanceProvider';import{useCurrentLotto}from'src/contexts/CurrentLotteryProvider/CurrentLotteryProvider';import ButtonSelectCollateral from'src/components/ButtonSelectCollateral';import{useWeb3React}from'@web3-react/core';import Spacer from'src/components/Spacer';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ButtonStatus;(function(ButtonStatus){ButtonStatus[ButtonStatus[\"notConnected\"]=1]=\"notConnected\";ButtonStatus[ButtonStatus[\"insufficient\"]=2]=\"insufficient\";ButtonStatus[ButtonStatus[\"requireApproval\"]=3]=\"requireApproval\";ButtonStatus[ButtonStatus[\"approvalPending\"]=4]=\"approvalPending\";ButtonStatus[ButtonStatus[\"paused\"]=15]=\"paused\";ButtonStatus[ButtonStatus[\"ready\"]=20]=\"ready\";ButtonStatus[ButtonStatus[\"notEnough\"]=21]=\"notEnough\";})(ButtonStatus||(ButtonStatus={}));var EmptyTicket={id:undefined};var LIMIT_TICKET=6;var BuyTickets=function BuyTickets(){var diamondHand=useDiamondHand();var config=useConfiguration();var _useTryConnect=useTryConnect(),tryConnect=_useTryConnect.tryConnect;var _useWeb3React=useWeb3React(),account=_useWeb3React.account;var handleTransactionReceipt=useHandleTransactionReceipt();var _useCurrentLotto=useCurrentLotto(),info=_useCurrentLotto.info;var _useState=useState([EmptyTicket]),_useState2=_slicedToArray(_useState,2),tickets=_useState2[0],setTickets=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),token=_useState4[0],setToken=_useState4[1];var balance=useTokenBalance(token);useEffect(function(){if(!diamondHand||token)return;setToken(diamondHand.CUFFIES);},[diamondHand,token]);var buyAddress=useMemo(function(){var _config$addresses;if(!config){return;}return config===null||config===void 0?void 0:(_config$addresses=config.addresses)===null||_config$addresses===void 0?void 0:_config$addresses.Nft;},[config]);var _useApprove=useApprove(token,buyAddress),_useApprove2=_slicedToArray(_useApprove,2),approvalTokenState=_useApprove2[0],approveToken=_useApprove2[1];var validTickets=useMemo(function(){return tickets.filter(function(t){return t.id<6;});},[tickets]);var totalCost=BigNumber.from(2000).mul((validTickets===null||validTickets===void 0?void 0:validTickets.length)||0);var status=useMemo(function(){if(!account){return ButtonStatus.notConnected;}if(approvalTokenState==ApprovalState.PENDING){return ButtonStatus.approvalPending;}if(approvalTokenState!==ApprovalState.APPROVED){return ButtonStatus.requireApproval;}if(balance&&balance.lt(totalCost)){return ButtonStatus.notEnough;}return ButtonStatus.ready;},[approvalTokenState,account,totalCost,balance]);var buttonText=useMemo(function(){switch(status){case ButtonStatus.notConnected:return'Connect';case ButtonStatus.approvalPending:return\"Approving \".concat(token===null||token===void 0?void 0:token.symbol,\"...\");case ButtonStatus.requireApproval:return'Approve';case ButtonStatus.notEnough:return\"Not Enough \".concat(token===null||token===void 0?void 0:token.symbol);default:return'Buy NFT';}},[status,token]);var addNewTicket=useCallback(function(){setTickets(function(x){var newBall=_objectSpread({},EmptyTicket);return[].concat(_toConsumableArray(x),[newBall]);});},[]);var onChangeTicket=useCallback(function(index,ticket){setTickets(function(state){return state.map(function(item,idx){if(idx!==index){return item;}return _objectSpread(_objectSpread({},item),ticket);});});},[]);var removeTicket=useCallback(function(id){setTickets(function(tickets){return tickets.slice(0,id).concat(tickets.slice(id+1));});},[]);var onChangePaymentToken=useCallback(function(token){if(token){setToken(diamondHand===null||diamondHand===void 0?void 0:diamondHand.getTokenByAddress(token===null||token===void 0?void 0:token.address));}},[diamondHand]);var buy=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var validTickets,numbers,index,tx;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:validTickets=tickets.filter(function(t){return t.id<6;});// TODO: real check\nnumbers=flatten(validTickets.map(function(t){return[t.id];}));if(validTickets.length){_context.next=4;break;}return _context.abrupt(\"return\");case 4:console.log('useConfiguration',numbers);index=0;case 6:if(!(index<numbers.length+1)){_context.next=22;break;}_context.prev=7;_context.next=10;return handleTransactionReceipt(diamondHand===null||diamondHand===void 0?void 0:diamondHand.NFT.buynft(numbers[index]),\"Mint My Little Babys\");case 10:tx=_context.sent;if(!(tx&&tx.response)){_context.next=15;break;}_context.next=14;return tx.response.wait();case 14:tx.hideModal();case 15:_context.next=19;break;case 17:_context.prev=17;_context.t0=_context[\"catch\"](7);case 19:index++;_context.next=6;break;case 22:case\"end\":return _context.stop();}}},_callee,null,[[7,17]]);})),[diamondHand===null||diamondHand===void 0?void 0:diamondHand.NFT,handleTransactionReceipt,tickets]);var onClickBuy=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.t0=status;_context2.next=_context2.t0===ButtonStatus.notConnected?3:_context2.t0===ButtonStatus.requireApproval?5:_context2.t0===ButtonStatus.notEnough?8:_context2.t0===ButtonStatus.approvalPending?8:_context2.t0===ButtonStatus.ready?9:11;break;case 3:tryConnect();return _context2.abrupt(\"break\",11);case 5:_context2.next=7;return approveToken();case 7:return _context2.abrupt(\"break\",11);case 8:return _context2.abrupt(\"break\",11);case 9:buy();return _context2.abrupt(\"break\",11);case 11:case\"end\":return _context2.stop();}}},_callee2);})),[status,tryConnect,approveToken,buy]);return/*#__PURE__*/_jsx(Page,{home:true,children:/*#__PURE__*/_jsxs(Container,{size:\"homepage\",children:[/*#__PURE__*/_jsxs(HeaderStyled,{children:[/*#__PURE__*/_jsxs(BuyTicketHeaderStyled,{children:[/*#__PURE__*/_jsx(BuyTicketImagetyled,{children:/*#__PURE__*/_jsx(\"img\",{src:TicketImg})}),/*#__PURE__*/_jsx(BuyTicketLabeltyled,{children:\"Buy NFT\"})]}),/*#__PURE__*/_jsxs(StyledHeaderRight,{children:[/*#__PURE__*/_jsxs(StyledRole,{children:[\"Buy up to \",LIMIT_TICKET,\" NFT's\"]}),/*#__PURE__*/_jsx(Spacer,{})]})]}),/*#__PURE__*/_jsxs(StyledWrapBody,{children:[/*#__PURE__*/_jsxs(StyledBody,{children:[/*#__PURE__*/_jsx(NumberTicketHeaderStyled,{children:/*#__PURE__*/_jsx(StyledLabel,{children:\"NFTs:\"})}),/*#__PURE__*/_jsxs(TicketContainerStyled,{children:[tickets.map(function(ticket,index){return/*#__PURE__*/_jsx(SelectTicketItemContainerStyled,{children:/*#__PURE__*/_jsx(SelectTicketItem,{index:index,ticketItem:ticket,onChange:onChangeTicket,removeTicket:removeTicket})},index);}),/*#__PURE__*/_jsxs(AddNewTicketButtonStyled,{disabled:(tickets===null||tickets===void 0?void 0:tickets.length)>=LIMIT_TICKET,onClick:addNewTicket,children:[/*#__PURE__*/_jsx(AddNewTicketButtonHeader,{children:\"Add Cuffies\"}),/*#__PURE__*/_jsx(AddNewTicketButtonPlus,{children:\"+\"})]})]})]}),/*#__PURE__*/_jsxs(StyledWrapPayment,{children:[/*#__PURE__*/_jsx(StyledPaymentLabel,{children:\"Payment\"}),/*#__PURE__*/_jsxs(StyledPaymentContent,{children:[/*#__PURE__*/_jsxs(StyledPaymentHeader,{children:[/*#__PURE__*/_jsx(ButtonSelectCollateral,{tokenAddress:token===null||token===void 0?void 0:token.address,onSelected:onChangePaymentToken}),/*#__PURE__*/_jsxs(StyledBalance,{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Balance: \"}),/*#__PURE__*/_jsx(BignumberStyled,{children:/*#__PURE__*/_jsx(NumberDisplay,{value:balance,decimals:(token===null||token===void 0?void 0:token.decimals)||18,precision:0})}),/*#__PURE__*/_jsx(\"span\",{className:\"unit\",children:token===null||token===void 0?void 0:token.symbol})]})]}),/*#__PURE__*/_jsxs(StyledPaymentBody,{children:[/*#__PURE__*/_jsxs(StyledFlex,{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Price per NFT\"}),/*#__PURE__*/_jsxs(BignumberStyled,{children:[/*#__PURE__*/_jsx(NumberDisplay,{value:info===null||info===void 0?void 0:info.costPerTicket,decimals:18,precision:0,keepZeros:true}),/*#__PURE__*/_jsxs(\"span\",{children:[\" \",token===null||token===void 0?void 0:token.symbol]})]})]}),/*#__PURE__*/_jsxs(StyledFlex,{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Number of NFT's\"}),/*#__PURE__*/_jsx(BignumberStyled,{children:validTickets===null||validTickets===void 0?void 0:validTickets.length})]}),/*#__PURE__*/_jsxs(StyledFlex,{className:\"total\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"TOTAL\"}),/*#__PURE__*/_jsxs(AmountStyled,{children:[/*#__PURE__*/_jsx(NumberDisplay,{value:totalCost,decimals:(token===null||token===void 0?void 0:token.decimals)||18,precision:4,keepZeros:false}),' ',token===null||token===void 0?void 0:token.symbol]})]}),/*#__PURE__*/_jsx(ApproveButtonStyled,{type:\"button\",className:status==ButtonStatus.notEnough?'btn btn-success not-enough':'btn btn-success',onClick:onClickBuy,children:buttonText}),/*#__PURE__*/_jsx(StyledBuyiron,{children:/*#__PURE__*/_jsxs(StyledLink,{target:\"_blank\",href:ExternalLinks.buyCuffies,children:[/*#__PURE__*/_jsx(StyledFontAwesomeIcon,{icon:faShoppingCart}),\"Buy Cuffies\"]})})]})]})]})]})]})});};var StyledPaymentContent=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  background-color: #E80055;\\n  border-radius: 25px;\\n  border: solid 10px #5c0424;\\n  padding: 20px;\\n\"])));var StyledPaymentHeader=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  border-bottom: 1px dashed #303030;\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: space-between;\\n  padding-bottom: 12px;\\n\"])));var StyledPaymentBody=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  padding-top: 12px;\\n\"])));var StyledFlex=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  margin-bottom: 12px;\\n  font-size: 14px;\\n  label {\\n    color: '#5c0424';\\n  }\\n  &.total {\\n    label {\\n      font-weight: 600;\\n    }\\n  }\\n\"])));var StyledPaymentLabel=styled.div(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  font-size: 18px;\\n  text-transform: uppercase;\\n  font-weight: bold;\\n  padding: 21px 0px 15px 0;\\n  @media (max-width: 768px) {\\n    padding: 15px 0 10px 0;\\n  }\\n\"])));var StyledLabel=styled.div(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  font-size: 18px;\\n  text-transform: uppercase;\\n  font-weight: bold;\\n\"])));var StyledRole=styled.div(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  margin-right: 5px;\\n  font-size: 15px;\\n  font-weight: 500;\\n  span {\\n    font-size: 16px;\\n    font-weight: bold;\\n  }\\n  img {\\n    width: 8px;\\n    height: 20px;\\n    margin-right: 8px;\\n  }\\n  .select-number {\\n    margin-left: auto;\\n  }\\n\"])));var HeaderStyled=styled.div(_templateObject8||(_templateObject8=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: flex-end;\\n  border-bottom: dashed 2px #303030;\\n  padding-bottom: 13px;\\n  @media (max-width: 768px) {\\n    display: block;\\n    border-bottom: none;\\n    padding-bottom: 0px;\\n  }\\n\"])));var BuyTicketHeaderStyled=styled.div(_templateObject9||(_templateObject9=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: flex-end;\\n  @media (max-width: 768px) {\\n    border-bottom: dashed 2px \",\";\\n    padding-bottom: 20px;\\n  }\\n\"])),theme.color.primary.main);var NumberTicketHeaderStyled=styled.div(_templateObject10||(_templateObject10=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: flex-end;\\n  justify-content: space-between;\\n  padding: 21px 0px 15px 0;\\n  @media (max-width: 768px) {\\n    padding: 15px 0 10px 0;\\n  }\\n\"])));var StyledBuyMultiTicket=styled.button(_templateObject11||(_templateObject11=_taggedTemplateLiteral([\"\\n  padding: 5px 10px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  font-size: 14px;\\n  font-weight: normal;\\n  border: 3px solid \",\";\\n  background-color: \",\";\\n  cursor: pointer;\\n  margin-right: 10px;\\n  @media (max-width: \",\") {\\n    margin-top: 10px;\\n  }\\n\"])),theme.color.primary.main,theme.color.orange[500],function(_ref3){var theme=_ref3.theme;return theme.breakpoints.md;});var BuyTicketImagetyled=styled.div(_templateObject12||(_templateObject12=_taggedTemplateLiteral([\"\\n  height: 40px;\\n  img {\\n    height: 100%;\\n  }\\n\"])));var AmountStyled=styled.span(_templateObject13||(_templateObject13=_taggedTemplateLiteral([\"\\n  font-size: 16px;\\n  font-weight: 700;\\n  color: #2dfc8b;\\n\"])));var TransitioningBackground=keyframes(_templateObject14||(_templateObject14=_taggedTemplateLiteral([\"\\n  0% {\\n    background-position: 1% 0%;\\n  }\\n  50% {\\n    background-position: 99% 100%;\\n  }\\n  100% {\\n    background-position: 1% 0%;\\n  }\\n\"])));var ApproveButtonStyled=styled.button(_templateObject15||(_templateObject15=_taggedTemplateLiteral([\"\\nfont-size: 1rem;\\n  font-weight: 600;\\n  color: white;\\n  text-align: center;\\n  width: 200px;\\n  height: 50px;\\n  border-color: #5c0424;\\n  border-radius: 5px;\\n  margin-left: auto;\\n  margin-right: auto;\\n  border-style: none;\\n\\n\\n  position: relative;\\n  overflow: hidden;\\n\\n  background-image: linear-gradient(180deg, #a1003a, #5c0424);\\n  background-size: 400% 400%;\\n  animation: \",\" 3s ease infinite;\\n  // to ease the button growth on hover\\n  transition: 0.6s;\\n\\n\\n  &::before {\\n    content: '';\\n    display: block;\\n    position: absolute;\\n    background: rgba(255, 255, 255, 0.5);\\n    width: 60px;\\n    height: 100%;\\n    top: 0;\\n    filter: blur(30px);\\n    transform: translateX(-100px) skewX(-15deg);\\n  }\\n\\n\\n  &::after {\\n    content: '';\\n    display: block;\\n    position: absolute;\\n    background: rgba(255, 255, 255, 0.2);\\n    width: 30px;\\n    height: 100%;\\n    top: 0;\\n    filter: blur(5px);\\n    transform: translateX(-100px) skewX(-15deg);\\n  }\\n\\n\\n  &:hover {\\n    background-image: linear-gradient(to left, #5c0424, #a1003a});\\n    transform: scale(1.05);\\n    cursor: pointer;\\n\\n\\n    &::before,\\n    &::after {\\n      transform: translateX(300px) skewX(-15deg);\\n      transition: 0.7s;\\n    }\\n  }\\n\"])),TransitioningBackground);var BuyTicketLabeltyled=styled.h1(_templateObject16||(_templateObject16=_taggedTemplateLiteral([\"\\n  margin: 0;\\n  margin-left: 12px;\\n  font-weight: bold;\\n\"])));var BignumberStyled=styled.span(_templateObject17||(_templateObject17=_taggedTemplateLiteral([\"\\n  margin-left: 0;\\n  font-weight: 700;\\n\"])));var TicketContainerStyled=styled.div(_templateObject18||(_templateObject18=_taggedTemplateLiteral([\"\\n  display: grid;\\n  grid-gap: 20px;\\n  grid-template-columns: repeat(3, 1fr);\\n  @media (max-width: 768px) {\\n    display: block;\\n    margin-top: 12px;\\n  }\\n\"])));var SelectTicketItemContainerStyled=styled.div(_templateObject19||(_templateObject19=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  @media (max-width: 768px) {\\n    margin-bottom: 14px;\\n  }\\n\"])));var AddNewTicketButtonStyled=styled.button(_templateObject20||(_templateObject20=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  border: dashed 3px #ed3c95;\\n  font-size: 5rem;\\n  font-weight: 400;\\n  cursor: pointer;\\n  height: 238px;\\n  background-color: transparent;\\n  position: relative;\\n  &:hover {\\n    background-color: rgba(235, 185, 209, 0.3);\\n\\n  }\\n  :disabled {\\n    border: none;\\n    cursor: not-allowed;\\n  }\\n  @media (max-width: 768px) {\\n    margin-bottom: 40px;\\n  }\\n\"])));var AddNewTicketButtonPlus=styled.div(_templateObject21||(_templateObject21=_taggedTemplateLiteral([\"\\n  font-size: 78px;\\n  font-weight: 700;\\n  color: \",\";\\n\"])),theme.color.primary.light);var AddNewTicketButtonHeader=styled.div(_templateObject22||(_templateObject22=_taggedTemplateLiteral([\"\\n  position: absolute;\\n  left: 0;\\n  right: 0;\\n  top: 0;\\n  height: 42px;\\n  line-height: 1;\\n  display: flex;\\n  align-items: center;\\n  padding: 5px 10px;\\n  font-family:'Dosis';\\n  background-color: transparent;\\n  text-transform: uppercase;\\n  color:\",\";\\n  font-size: 18px;\\n  font-weight: 700;\\n\"])),theme.color.primary.light);var StyledHeaderRight=styled.div(_templateObject23||(_templateObject23=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  @media (max-width: 768px) {\\n    display: block;\\n    text-align: center;\\n    margin-top: 12px;\\n  }\\n\"])));var StyledBalance=styled.div(_templateObject24||(_templateObject24=_taggedTemplateLiteral([\"\\n  font-size: 0.85rem;\\n  display: flex;\\n  align-items: center;\\n  color:\",\";\\n  .unit {\\n    font-weight: 700;\\n    margin-left: 5px;\\n  }\\n\"])),theme.color.primary.light);var StyledBuyiron=styled.div(_templateObject25||(_templateObject25=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  padding-bottom: 10px;\\n  @media (max-width: 768px) {\\n    a {\\n      margin-left: 10px;\\n    }\\n  }\\n\"])));var StyledFontAwesomeIcon=styled(FontAwesomeIcon)(_templateObject26||(_templateObject26=_taggedTemplateLiteral([\"\\n  margin-right: 5px;\\n\"])));var StyledLink=styled.a(_templateObject27||(_templateObject27=_taggedTemplateLiteral([\"\\n  align-items: center;\\n  color: inherit;\\n  display: flex;\\n  justify-content: center;\\n  padding: 0px;\\n  margin-left: 15px;\\n  font-weight: 700;\\n  font-size: 14px;\\n  color: #fff;\\n  text-decoration: none;\\n  &:hover {\\n    color: #a3212a;\\n  }\\n\"])));var StyledWrapBody=styled.div(_templateObject28||(_templateObject28=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: flex-start;\\n  margin-bottom: 50px;\\n  @media (max-width: \",\") {\\n    flex-direction: column-reverse;\\n  }\\n\"])),function(_ref4){var theme=_ref4.theme;return theme.breakpoints.md;});var StyledBody=styled.div(_templateObject29||(_templateObject29=_taggedTemplateLiteral([\"\\n  flex: 1;\\n  margin-right: 20px;\\n  @media (max-width: \",\") {\\n    margin-right: 0px;\\n  }\\n\"])),function(_ref5){var theme=_ref5.theme;return theme.breakpoints.md;});var StyledWrapPayment=styled.div(_templateObject30||(_templateObject30=_taggedTemplateLiteral([\"\\n  align-self: flex-start;\\n  width: 25%;\\n  @media (max-width: \",\") {\\n    width: 100%;\\n  }\\n\"])),function(_ref6){var theme=_ref6.theme;return theme.breakpoints.md;});export default BuyTickets;","map":{"version":3,"sources":["/Users/ivopascoal/Desktop/cuffies/src/views/DragonBall/components/BuyLottery.tsx"],"names":["React","useCallback","useEffect","useMemo","useState","BigNumber","FontAwesomeIcon","faShoppingCart","styled","keyframes","Container","useConfiguration","useApprove","ApprovalState","useDiamondHand","useTryConnect","theme","SelectTicketItem","Page","flatten","useHandleTransactionReceipt","NumberDisplay","ExternalLinks","useTokenBalance","useCurrentLotto","ButtonSelectCollateral","useWeb3React","Spacer","ButtonStatus","EmptyTicket","id","undefined","LIMIT_TICKET","BuyTickets","diamondHand","config","tryConnect","account","handleTransactionReceipt","info","tickets","setTickets","token","setToken","balance","CUFFIES","buyAddress","addresses","Nft","approvalTokenState","approveToken","validTickets","filter","t","totalCost","from","mul","length","status","notConnected","PENDING","approvalPending","APPROVED","requireApproval","lt","notEnough","ready","buttonText","symbol","addNewTicket","x","newBall","onChangeTicket","index","ticket","state","map","item","idx","removeTicket","slice","concat","onChangePaymentToken","getTokenByAddress","address","buy","numbers","console","log","NFT","buynft","tx","response","wait","hideModal","onClickBuy","TicketImg","decimals","costPerTicket","buyCuffies","StyledPaymentContent","div","StyledPaymentHeader","StyledPaymentBody","StyledFlex","StyledPaymentLabel","StyledLabel","StyledRole","HeaderStyled","BuyTicketHeaderStyled","color","primary","main","NumberTicketHeaderStyled","StyledBuyMultiTicket","button","orange","breakpoints","md","BuyTicketImagetyled","AmountStyled","span","TransitioningBackground","ApproveButtonStyled","BuyTicketLabeltyled","h1","BignumberStyled","TicketContainerStyled","SelectTicketItemContainerStyled","AddNewTicketButtonStyled","AddNewTicketButtonPlus","light","AddNewTicketButtonHeader","StyledHeaderRight","StyledBalance","StyledBuyiron","StyledFontAwesomeIcon","StyledLink","a","StyledWrapBody","StyledBody","StyledWrapPayment"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { BigNumber } from '@ethersproject/bignumber';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nimport { faShoppingCart } from \"@fortawesome/free-solid-svg-icons\";\nimport styled, { keyframes} from 'styled-components';\nimport { TicketItemProp } from 'src/api/models';\nimport Container from 'src/components/Container';\nimport { useConfiguration } from 'src/contexts/ConfigProvider/ConfigProvider';\nimport useApprove, { ApprovalState } from 'src/hooks/useApprove';\nimport useDiamondHand from 'src/hooks/useDiamondHand';\nimport useTryConnect from 'src/hooks/useTryConnect';\nimport theme from 'src/theme';\nimport SelectTicketItem from './SelectTicketItem';\nimport TicketImg from 'src/assets/img/ticket-white.svg';\nimport Page from 'src/components/Page';\nimport { flatten } from 'src/utils/objects';\nimport useHandleTransactionReceipt from 'src/hooks/useHandleTransactionReceipt';\nimport NumberDisplay from 'src/components/Number';\nimport { ExternalLinks } from 'src/config';\nimport { useTokenBalance } from 'src/contexts/AccountBalanceProvider/AccountBalanceProvider';\nimport { useCurrentLotto } from 'src/contexts/CurrentLotteryProvider/CurrentLotteryProvider';\nimport { useHistory } from 'react-router';\nimport useModal from 'src/hooks/useModal';\nimport BuyMultiTicketModal from './BuyMultiTicketModal';\nimport crypto from 'crypto';\nimport ButtonSelectCollateral from 'src/components/ButtonSelectCollateral';\nimport ERC20 from 'src/diamondhand/ERC20';\nimport { useWeb3React } from '@web3-react/core';\nimport Spacer from 'src/components/Spacer';\n\nenum ButtonStatus {\n  notConnected = 1,\n  insufficient = 2,\n  requireApproval = 3,\n  approvalPending = 4,\n  paused = 15,\n  ready = 20,\n  notEnough = 21,\n}\n\nconst EmptyTicket: TicketItemProp = {\n  id: undefined,\n};\n\nconst LIMIT_TICKET = 6;\n\n\nconst BuyTickets: React.FC = () => {\n  const diamondHand = useDiamondHand();\n  const config = useConfiguration();\n  const { tryConnect } = useTryConnect();\n  const { account } = useWeb3React();\n  const handleTransactionReceipt = useHandleTransactionReceipt();\n  const { info } = useCurrentLotto();\n  const [tickets, setTickets] = useState<TicketItemProp[]>([EmptyTicket]);\n  const [token, setToken] = useState<ERC20 | undefined>();\n  const balance = useTokenBalance(token);\n\n  useEffect(() => {\n    if (!diamondHand || token) return;\n    setToken(diamondHand.CUFFIES);\n  }, [diamondHand, token]);\n\n  const buyAddress = useMemo(() => {\n    if (!config) {\n      return;\n    }\n    return config?.addresses?.Nft;\n  }, [config]);\n\n  const [approvalTokenState, approveToken] = useApprove(token, buyAddress);\n\n  const validTickets = useMemo(() => {\n    return tickets.filter((t) => t.id < 6);\n  }, [tickets]);\n\n  const totalCost = BigNumber.from(2000).mul(validTickets?.length || 0);\n\n\n\n  const status = useMemo(() => {\n    if (!account) {\n      return ButtonStatus.notConnected;\n    }\n\n    if (approvalTokenState == ApprovalState.PENDING) {\n      return ButtonStatus.approvalPending;\n    }\n\n    if (approvalTokenState !== ApprovalState.APPROVED) {\n      return ButtonStatus.requireApproval;\n    }\n\n    if (balance && balance.lt(totalCost)) {\n      return ButtonStatus.notEnough;\n    }\n\n    return ButtonStatus.ready;\n  }, [approvalTokenState, account, totalCost, balance]);\n\n  const buttonText = useMemo(() => {\n    switch (status) {\n      case ButtonStatus.notConnected:\n        return 'Connect';\n\n      case ButtonStatus.approvalPending:\n        return `Approving ${token?.symbol}...`;\n\n      case ButtonStatus.requireApproval:\n        return 'Approve';\n\n      case ButtonStatus.notEnough:\n        return `Not Enough ${token?.symbol}`;\n\n      default:\n        return 'Buy NFT';\n    }\n  }, [status, token]);\n\n  const addNewTicket = useCallback(() => {\n    setTickets((x) => {\n      const newBall = { ...EmptyTicket };\n      return [...x, newBall];\n    });\n  }, []);\n\n  const onChangeTicket = useCallback((index: number, ticket: TicketItemProp) => {\n    setTickets((state) => {\n      return state.map((item, idx) => {\n        if (idx !== index) {\n          return item;\n        }\n\n        return {\n          ...item,\n          ...ticket,\n        };\n      });\n    });\n  }, []);\n\n\n\n\n\n  const removeTicket = useCallback((id: number) => {\n    setTickets((tickets) => tickets.slice(0, id).concat(tickets.slice(id + 1)));\n  }, []);\n\n  const onChangePaymentToken = useCallback(\n    (token?: ERC20) => {\n      if (token) {\n        setToken(diamondHand?.getTokenByAddress(token?.address));\n      }\n    },\n    [diamondHand],\n  );\n\n  const buy = useCallback(async () => {\n    const validTickets = tickets.filter(\n      (t) => t.id < 6 ,\n    ); // TODO: real check\n    const numbers = flatten(\n      validTickets.map((t) => [t.id]),\n    );\n\n    if (!validTickets.length) {\n      return;\n    }\n    console.log('useConfiguration', numbers);\n\nfor(let index = 0; index < numbers.length+1; index++){\n\n  try {\n    const tx = await handleTransactionReceipt(\n      diamondHand?.NFT.buynft(numbers[index]),\n      `Mint My Little Babys`,\n    );\n    if (tx && tx.response) {\n      await tx.response.wait();\n      tx.hideModal();\n    }\n  } catch {\n    //\n  }\n\n\n\n}\n\n  }, [diamondHand?.NFT, handleTransactionReceipt, tickets]);\n\n  const onClickBuy = useCallback(async () => {\n    switch (status) {\n      case ButtonStatus.notConnected:\n        tryConnect();\n        break;\n      case ButtonStatus.requireApproval:\n        await approveToken();\n        break;\n      case ButtonStatus.notEnough:\n      case ButtonStatus.approvalPending:\n        break;\n      case ButtonStatus.ready:\n        buy();\n        break;\n    }\n  }, [status, tryConnect, approveToken, buy]);\n\n  return (\n    <Page home>\n      <Container size=\"homepage\">\n        <HeaderStyled>\n          <BuyTicketHeaderStyled>\n            <BuyTicketImagetyled>\n              <img src={TicketImg} />\n            </BuyTicketImagetyled>\n            <BuyTicketLabeltyled>Buy NFT</BuyTicketLabeltyled>\n          </BuyTicketHeaderStyled>\n          <StyledHeaderRight>\n            <StyledRole>Buy up to {LIMIT_TICKET} NFT's</StyledRole>\n            <Spacer />\n\n          </StyledHeaderRight>\n        </HeaderStyled>\n        <StyledWrapBody>\n          <StyledBody>\n            <NumberTicketHeaderStyled>\n              <StyledLabel>NFTs:</StyledLabel>\n            </NumberTicketHeaderStyled>\n            <TicketContainerStyled>\n              {tickets.map((ticket, index) => {\n                return (\n                  <SelectTicketItemContainerStyled key={index}>\n                    <SelectTicketItem\n                      index={index}\n\n                      ticketItem={ticket}\n                      onChange={onChangeTicket}\n                      removeTicket={removeTicket}\n                    ></SelectTicketItem>\n                  </SelectTicketItemContainerStyled>\n                );\n              })}\n              <AddNewTicketButtonStyled\n                disabled={tickets?.length >= LIMIT_TICKET}\n                onClick={addNewTicket}\n              >\n                <AddNewTicketButtonHeader>Add Cuffies</AddNewTicketButtonHeader>\n                <AddNewTicketButtonPlus>+</AddNewTicketButtonPlus>\n              </AddNewTicketButtonStyled>\n            </TicketContainerStyled>\n          </StyledBody>\n          <StyledWrapPayment>\n            <StyledPaymentLabel>Payment</StyledPaymentLabel>\n            <StyledPaymentContent>\n              <StyledPaymentHeader>\n                <ButtonSelectCollateral\n                  tokenAddress={token?.address}\n                  onSelected={onChangePaymentToken}\n                />\n\n                <StyledBalance>\n                  <span>Balance: </span>\n                  <BignumberStyled>\n                    <NumberDisplay\n                      value={balance}\n                      decimals={token?.decimals || 18}\n                      precision={0}\n                    />\n                  </BignumberStyled>\n                  <span className=\"unit\">{token?.symbol}</span>\n                </StyledBalance>\n              </StyledPaymentHeader>\n              <StyledPaymentBody>\n                <StyledFlex>\n                  <label>Price per NFT</label>\n                  <BignumberStyled>\n                    <NumberDisplay\n                      value={info?.costPerTicket}\n                      decimals={18}\n                      precision={0}\n                      keepZeros={true}\n                    />\n                    <span> {token?.symbol}</span>\n                  </BignumberStyled>\n                </StyledFlex>\n                <StyledFlex>\n                  <label>Number of NFT's</label>\n                  <BignumberStyled>{validTickets?.length}</BignumberStyled>\n                </StyledFlex>\n                <StyledFlex className=\"total\">\n                  <label>TOTAL</label>\n                  <AmountStyled>\n                    <NumberDisplay\n                      value={totalCost}\n                      decimals={token?.decimals || 18}\n                      precision={4}\n                      keepZeros={false}\n                    />{' '}\n                    {token?.symbol}\n                  </AmountStyled>\n                </StyledFlex>\n                <ApproveButtonStyled\n                  type=\"button\"\n                  className={\n                    status == ButtonStatus.notEnough\n                      ? 'btn btn-success not-enough'\n                      : 'btn btn-success'\n                  }\n                  onClick={onClickBuy}\n                >\n                  {buttonText}\n                </ApproveButtonStyled>\n                <StyledBuyiron>\n                  <StyledLink target=\"_blank\" href={ExternalLinks.buyCuffies}>\n                    <StyledFontAwesomeIcon icon={faShoppingCart} />\n                    Buy Cuffies\n                  </StyledLink>\n                </StyledBuyiron>\n              </StyledPaymentBody>\n            </StyledPaymentContent>\n          </StyledWrapPayment>\n        </StyledWrapBody>\n      </Container>\n    </Page>\n  );\n};\n\nconst StyledPaymentContent = styled.div`\n  background-color: #E80055;\n  border-radius: 25px;\n  border: solid 10px #5c0424;\n  padding: 20px;\n`;\n\nconst StyledPaymentHeader = styled.div`\n  border-bottom: 1px dashed #303030;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  padding-bottom: 12px;\n`;\n\nconst StyledPaymentBody = styled.div`\n  padding-top: 12px;\n`;\n\nconst StyledFlex = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 12px;\n  font-size: 14px;\n  label {\n    color: '#5c0424';\n  }\n  &.total {\n    label {\n      font-weight: 600;\n    }\n  }\n`;\n\nconst StyledPaymentLabel = styled.div`\n  font-size: 18px;\n  text-transform: uppercase;\n  font-weight: bold;\n  padding: 21px 0px 15px 0;\n  @media (max-width: 768px) {\n    padding: 15px 0 10px 0;\n  }\n`;\n\nconst StyledLabel = styled.div`\n  font-size: 18px;\n  text-transform: uppercase;\n  font-weight: bold;\n`;\nconst StyledRole = styled.div`\n  display: flex;\n  align-items: center;\n  margin-right: 5px;\n  font-size: 15px;\n  font-weight: 500;\n  span {\n    font-size: 16px;\n    font-weight: bold;\n  }\n  img {\n    width: 8px;\n    height: 20px;\n    margin-right: 8px;\n  }\n  .select-number {\n    margin-left: auto;\n  }\n`;\n\nconst HeaderStyled = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-end;\n  border-bottom: dashed 2px #303030;\n  padding-bottom: 13px;\n  @media (max-width: 768px) {\n    display: block;\n    border-bottom: none;\n    padding-bottom: 0px;\n  }\n`;\nconst BuyTicketHeaderStyled = styled.div`\n  display: flex;\n  align-items: flex-end;\n  @media (max-width: 768px) {\n    border-bottom: dashed 2px ${theme.color.primary.main};\n    padding-bottom: 20px;\n  }\n`;\nconst NumberTicketHeaderStyled = styled.div`\n  display: flex;\n  align-items: flex-end;\n  justify-content: space-between;\n  padding: 21px 0px 15px 0;\n  @media (max-width: 768px) {\n    padding: 15px 0 10px 0;\n  }\n`;\n\nconst StyledBuyMultiTicket = styled.button`\n  padding: 5px 10px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 14px;\n  font-weight: normal;\n  border: 3px solid ${theme.color.primary.main};\n  background-color: ${theme.color.orange[500]};\n  cursor: pointer;\n  margin-right: 10px;\n  @media (max-width: ${({ theme }) => theme.breakpoints.md}) {\n    margin-top: 10px;\n  }\n`;\nconst BuyTicketImagetyled = styled.div`\n  height: 40px;\n  img {\n    height: 100%;\n  }\n`;\n\nconst AmountStyled = styled.span`\n  font-size: 16px;\n  font-weight: 700;\n  color: #2dfc8b;\n`;\n\n\nconst TransitioningBackground = keyframes`\n  0% {\n    background-position: 1% 0%;\n  }\n  50% {\n    background-position: 99% 100%;\n  }\n  100% {\n    background-position: 1% 0%;\n  }\n`;\n\n\nconst ApproveButtonStyled = styled.button`\nfont-size: 1rem;\n  font-weight: 600;\n  color: white;\n  text-align: center;\n  width: 200px;\n  height: 50px;\n  border-color: #5c0424;\n  border-radius: 5px;\n  margin-left: auto;\n  margin-right: auto;\n  border-style: none;\n\n\n  position: relative;\n  overflow: hidden;\n\n  background-image: linear-gradient(180deg, #a1003a, #5c0424);\n  background-size: 400% 400%;\n  animation: ${TransitioningBackground} 3s ease infinite;\n  // to ease the button growth on hover\n  transition: 0.6s;\n\n\n  &::before {\n    content: '';\n    display: block;\n    position: absolute;\n    background: rgba(255, 255, 255, 0.5);\n    width: 60px;\n    height: 100%;\n    top: 0;\n    filter: blur(30px);\n    transform: translateX(-100px) skewX(-15deg);\n  }\n\n\n  &::after {\n    content: '';\n    display: block;\n    position: absolute;\n    background: rgba(255, 255, 255, 0.2);\n    width: 30px;\n    height: 100%;\n    top: 0;\n    filter: blur(5px);\n    transform: translateX(-100px) skewX(-15deg);\n  }\n\n\n  &:hover {\n    background-image: linear-gradient(to left, #5c0424, #a1003a});\n    transform: scale(1.05);\n    cursor: pointer;\n\n\n    &::before,\n    &::after {\n      transform: translateX(300px) skewX(-15deg);\n      transition: 0.7s;\n    }\n  }\n`;\nconst BuyTicketLabeltyled = styled.h1`\n  margin: 0;\n  margin-left: 12px;\n  font-weight: bold;\n`;\nconst BignumberStyled = styled.span`\n  margin-left: 0;\n  font-weight: 700;\n`;\nconst TicketContainerStyled = styled.div`\n  display: grid;\n  grid-gap: 20px;\n  grid-template-columns: repeat(3, 1fr);\n  @media (max-width: 768px) {\n    display: block;\n    margin-top: 12px;\n  }\n`;\nconst SelectTicketItemContainerStyled = styled.div`\n  width: 100%;\n  @media (max-width: 768px) {\n    margin-bottom: 14px;\n  }\n`;\nconst AddNewTicketButtonStyled = styled.button`\n  width: 100%;\n  border: dashed 3px #ed3c95;\n  font-size: 5rem;\n  font-weight: 400;\n  cursor: pointer;\n  height: 238px;\n  background-color: transparent;\n  position: relative;\n  &:hover {\n    background-color: rgba(235, 185, 209, 0.3);\n\n  }\n  :disabled {\n    border: none;\n    cursor: not-allowed;\n  }\n  @media (max-width: 768px) {\n    margin-bottom: 40px;\n  }\n`;\nconst AddNewTicketButtonPlus = styled.div`\n  font-size: 78px;\n  font-weight: 700;\n  color: ${theme.color.primary.light};\n`;\nconst AddNewTicketButtonHeader = styled.div`\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  height: 42px;\n  line-height: 1;\n  display: flex;\n  align-items: center;\n  padding: 5px 10px;\n  font-family:'Dosis';\n  background-color: transparent;\n  text-transform: uppercase;\n  color:${theme.color.primary.light};\n  font-size: 18px;\n  font-weight: 700;\n`;\nconst StyledHeaderRight = styled.div`\n  display: flex;\n  align-items: center;\n  @media (max-width: 768px) {\n    display: block;\n    text-align: center;\n    margin-top: 12px;\n  }\n`;\n\nconst StyledBalance = styled.div`\n  font-size: 0.85rem;\n  display: flex;\n  align-items: center;\n  color:${theme.color.primary.light};\n  .unit {\n    font-weight: 700;\n    margin-left: 5px;\n  }\n`;\nconst StyledBuyiron = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding-bottom: 10px;\n  @media (max-width: 768px) {\n    a {\n      margin-left: 10px;\n    }\n  }\n`;\nconst StyledFontAwesomeIcon = styled(FontAwesomeIcon)`\n  margin-right: 5px;\n`;\nconst StyledLink = styled.a`\n  align-items: center;\n  color: inherit;\n  display: flex;\n  justify-content: center;\n  padding: 0px;\n  margin-left: 15px;\n  font-weight: 700;\n  font-size: 14px;\n  color: #fff;\n  text-decoration: none;\n  &:hover {\n    color: #a3212a;\n  }\n`;\n\nconst StyledWrapBody = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  margin-bottom: 50px;\n  @media (max-width: ${({ theme }) => theme.breakpoints.md}) {\n    flex-direction: column-reverse;\n  }\n`;\n\nconst StyledBody = styled.div`\n  flex: 1;\n  margin-right: 20px;\n  @media (max-width: ${({ theme }) => theme.breakpoints.md}) {\n    margin-right: 0px;\n  }\n`;\n\nconst StyledWrapPayment = styled.div`\n  align-self: flex-start;\n  width: 25%;\n  @media (max-width: ${({ theme }) => theme.breakpoints.md}) {\n    width: 100%;\n  }\n`;\nexport default BuyTickets;\n"]},"metadata":{},"sourceType":"module"}