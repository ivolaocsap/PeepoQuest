{"ast":null,"code":"var _jsxFileName = \"/Users/ivopascoal/Desktop/PeepoAvax/src/views/Mim/ButtonStake.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { ButtonAction } from 'src/components/ButtonAction';\nimport styled from 'styled-components';\nimport useDiamondHand from 'src/hooks/useDiamondHand';\nimport useHandleTransactionReceipt from 'src/hooks/useHandleTransactionReceipt';\nimport { useConfiguration } from 'src/contexts/ConfigProvider/ConfigProvider';\nimport { useTokenBalance } from 'src/contexts/AccountBalanceProvider/AccountBalanceProvider';\nimport useApprove, { ApprovalState } from 'src/hooks/useApprove';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar ButtonStatus;\n\n(function (ButtonStatus) {\n  ButtonStatus[ButtonStatus[\"notConnected\"] = 1] = \"notConnected\";\n  ButtonStatus[ButtonStatus[\"insufficient\"] = 2] = \"insufficient\";\n  ButtonStatus[ButtonStatus[\"requireApproval\"] = 3] = \"requireApproval\";\n  ButtonStatus[ButtonStatus[\"approvalPending\"] = 4] = \"approvalPending\";\n  ButtonStatus[ButtonStatus[\"paused\"] = 15] = \"paused\";\n  ButtonStatus[ButtonStatus[\"ready\"] = 20] = \"ready\";\n  ButtonStatus[ButtonStatus[\"notEnough\"] = 21] = \"notEnough\";\n})(ButtonStatus || (ButtonStatus = {}));\n\nexport const ButtonStake = ({\n  amount\n}) => {\n  _s();\n\n  const dh = useDiamondHand();\n  const handleTransactionReceipt = useHandleTransactionReceipt();\n  const config = useConfiguration();\n  const [token, setToken] = useState();\n  const balance = useTokenBalance(token);\n  useEffect(() => {\n    if (!dh) return;\n    setToken(dh === null || dh === void 0 ? void 0 : dh.MIM);\n    console.log(token._address);\n  }, [dh, token]);\n  const buyAddress = useMemo(() => {\n    var _config$addresses;\n\n    if (!config) {\n      return;\n    }\n\n    return config === null || config === void 0 ? void 0 : (_config$addresses = config.addresses) === null || _config$addresses === void 0 ? void 0 : _config$addresses.MasterChef;\n  }, [config]);\n  const [approvalTokenState, approveToken] = useApprove(token, buyAddress);\n\n  const magik = async () => {\n    try {\n      var _dh$MASTERCHEF;\n\n      console.log(amount);\n      const tx = await handleTransactionReceipt((_dh$MASTERCHEF = dh.MASTERCHEF) === null || _dh$MASTERCHEF === void 0 ? void 0 : _dh$MASTERCHEF.magikFaucet(token.address, amount), `Magik woosh`);\n\n      if (tx && tx.response) {\n        await tx.response.wait();\n        tx.hideModal();\n      }\n    } catch {//\n    }\n  };\n\n  const status = useMemo(() => {\n    if (approvalTokenState == ApprovalState.PENDING) {\n      return ButtonStatus.approvalPending;\n    }\n\n    if (approvalTokenState !== ApprovalState.APPROVED) {\n      return ButtonStatus.requireApproval;\n    }\n\n    return ButtonStatus.ready;\n  }, [approvalTokenState, balance]);\n  const buttonText = useMemo(() => {\n    switch (status) {\n      case ButtonStatus.approvalPending:\n        return `Approving ${token === null || token === void 0 ? void 0 : token.symbol}...`;\n\n      case ButtonStatus.requireApproval:\n        return 'Approve';\n\n      default:\n        return 'Get MIM';\n    }\n  }, [status, token]);\n  const onClickBuy = useCallback(async () => {\n    switch (status) {\n      case ButtonStatus.requireApproval:\n        await approveToken();\n        break;\n\n      case ButtonStatus.approvalPending:\n        break;\n\n      case ButtonStatus.ready:\n        magik();\n        break;\n    }\n  }, [status, approveToken, magik]);\n  return /*#__PURE__*/_jsxDEV(StyledButtonAction, {\n    onClick: onClickBuy,\n    children: /*#__PURE__*/_jsxDEV(StyledText, {\n      children: [buttonText, \"!\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 104,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ButtonStake, \"VZi4ktHUEcwCsTrBnPC/PSw0SM4=\", false, function () {\n  return [useDiamondHand, useHandleTransactionReceipt, useConfiguration, useTokenBalance, useApprove];\n});\n\n_c = ButtonStake;\nconst StyledButtonAction = styled(ButtonAction)`\n  display: inline-block;\n  width: initial;\n  text-color: #f4b5d2;\n\n  background-color: #5a8f35;\n  :hover {\n    background-color: #a1118b;\n  }\n`;\n_c2 = StyledButtonAction;\nconst StyledText = styled.div`\n\n  font-size: 20px;\n  background: -webkit-linear-gradient(#e7d58b, #dfb771);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n\n  }\n`;\n_c3 = StyledText;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"ButtonStake\");\n$RefreshReg$(_c2, \"StyledButtonAction\");\n$RefreshReg$(_c3, \"StyledText\");","map":{"version":3,"sources":["/Users/ivopascoal/Desktop/PeepoAvax/src/views/Mim/ButtonStake.tsx"],"names":["React","useCallback","useEffect","useMemo","useState","ButtonAction","styled","useDiamondHand","useHandleTransactionReceipt","useConfiguration","useTokenBalance","useApprove","ApprovalState","ButtonStatus","ButtonStake","amount","dh","handleTransactionReceipt","config","token","setToken","balance","MIM","console","log","_address","buyAddress","addresses","MasterChef","approvalTokenState","approveToken","magik","tx","MASTERCHEF","magikFaucet","address","response","wait","hideModal","status","PENDING","approvalPending","APPROVED","requireApproval","ready","buttonText","symbol","onClickBuy","StyledButtonAction","StyledText","div"],"mappings":"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","sourcesContent":["import React, { forwardRef, useCallback, useEffect, useMemo, useState } from 'react';\nimport { ButtonAction } from 'src/components/ButtonAction';\nimport { BigNumber } from '@ethersproject/bignumber';\nimport styled from 'styled-components';\nimport useDiamondHand from 'src/hooks/useDiamondHand';\nimport useHandleTransactionReceipt from 'src/hooks/useHandleTransactionReceipt';\nimport { useConfiguration } from 'src/contexts/ConfigProvider/ConfigProvider';\nimport { useTokenBalance } from 'src/contexts/AccountBalanceProvider/AccountBalanceProvider';\nimport useApprove, { ApprovalState } from 'src/hooks/useApprove';\nimport ERC20 from 'src/diamondhand/ERC20';\n\nenum ButtonStatus {\n  notConnected = 1,\n  insufficient = 2,\n  requireApproval = 3,\n  approvalPending = 4,\n  paused = 15,\n  ready = 20,\n  notEnough = 21,\n}\n\ninterface ButtonStakeProps {\n  amount?: BigNumber;\n}\n\nexport const ButtonStake: React.ForwardRefRenderFunction<unknown, ButtonStakeProps> = ({\n  amount,\n}) => {\n  const dh = useDiamondHand();\n  const handleTransactionReceipt = useHandleTransactionReceipt();\n  const config = useConfiguration();\n  const [token, setToken] = useState<ERC20 | undefined>();\n  const balance = useTokenBalance(token);\n\n  useEffect(() => {\n    if (!dh) return;\n    setToken(dh?.MIM);\n    console.log(token._address);\n  }, [dh, token]);\n\n  const buyAddress = useMemo(() => {\n    if (!config) {\n      return;\n    }\n    return config?.addresses?.MasterChef;\n  }, [config]);\n\n  const [approvalTokenState, approveToken] = useApprove(token, buyAddress);\n\n  const magik = async () => {\n    try {\n      console.log(amount);\n      const tx = await handleTransactionReceipt(\n        dh.MASTERCHEF?.magikFaucet(token.address, amount),\n        `Magik woosh`,\n      );\n      if (tx && tx.response) {\n        await tx.response.wait();\n        tx.hideModal();\n      }\n    } catch {\n      //\n    }\n  };\n\n  const status = useMemo(() => {\n    if (approvalTokenState == ApprovalState.PENDING) {\n      return ButtonStatus.approvalPending;\n    }\n\n    if (approvalTokenState !== ApprovalState.APPROVED) {\n      return ButtonStatus.requireApproval;\n    }\n\n    return ButtonStatus.ready;\n  }, [approvalTokenState, balance]);\n\n  const buttonText = useMemo(() => {\n    switch (status) {\n      case ButtonStatus.approvalPending:\n        return `Approving ${token?.symbol}...`;\n\n      case ButtonStatus.requireApproval:\n        return 'Approve';\n      default:\n        return 'Get MIM';\n    }\n  }, [status, token]);\n\n  const onClickBuy = useCallback(async () => {\n    switch (status) {\n      case ButtonStatus.requireApproval:\n        await approveToken();\n        break;\n      case ButtonStatus.approvalPending:\n        break;\n      case ButtonStatus.ready:\n        magik();\n        break;\n    }\n  }, [status, approveToken, magik]);\n\n  return (\n    <StyledButtonAction onClick={onClickBuy}>\n      <StyledText>{buttonText}!</StyledText>\n    </StyledButtonAction>\n  );\n};\n\nconst StyledButtonAction = styled(ButtonAction)`\n  display: inline-block;\n  width: initial;\n  text-color: #f4b5d2;\n\n  background-color: #5a8f35;\n  :hover {\n    background-color: #a1118b;\n  }\n`;\nconst StyledText = styled.div`\n\n  font-size: 20px;\n  background: -webkit-linear-gradient(#e7d58b, #dfb771);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n\n  }\n`;\n"]},"metadata":{},"sourceType":"module"}