{"ast":null,"code":"var _jsxFileName = \"/Users/ivopascoal/Desktop/cuffies/src/contexts/Modals/Modals.tsx\",\n    _s = $RefreshSig$();\n\n/* eslint-disable @typescript-eslint/no-empty-function */\nimport React, { createContext, useCallback, useState } from 'react';\nimport styled from 'styled-components';\nimport { v4 } from 'uuid';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Context = /*#__PURE__*/createContext({\n  onPresent: () => '',\n  onDismiss: () => {}\n});\n\nconst modalSetter = info => state => {\n  const existed = info.id && state.some(x => x.id === info.id);\n\n  if (!existed) {\n    return [...state, info];\n  }\n\n  return state.map(item => item.id !== info.id ? item : info);\n};\n\nconst Modals = ({\n  children\n}) => {\n  _s();\n\n  const [modals, setModals] = useState([]);\n  const handlePresent = useCallback((modalContent, backdropClick, id) => {\n    id = id || v4();\n    setModals(modalSetter({\n      id,\n      content: modalContent,\n      backdropClick\n    }));\n    return id;\n  }, []);\n  const handleDismiss = useCallback(id => {\n    setModals(data => data.filter(t => t.id !== id));\n  }, []);\n  const backdropClick = useCallback(() => {\n    if (modals.length === 0) {\n      return;\n    }\n\n    setModals(data => data.slice(0, data.length - 1));\n  }, [modals]);\n  return /*#__PURE__*/_jsxDEV(Context.Provider, {\n    value: {\n      content: modals,\n      onPresent: handlePresent,\n      onDismiss: handleDismiss\n    },\n    children: [children, modals === null || modals === void 0 ? void 0 : modals.map(modal => /*#__PURE__*/_jsxDEV(StyledModalWrapper, {\n      children: [/*#__PURE__*/_jsxDEV(StyledBackdrop, {\n        onClick: modal.backdropClick ? backdropClick : undefined\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(ModalContent, {\n        children: /*#__PURE__*/React.isValidElement(modal.content) && /*#__PURE__*/React.cloneElement(modal.content, {\n          onDismiss: () => handleDismiss(modal.id)\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }, this)]\n    }, modal.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Modals, \"2Fx1sIBMrwqM6+Y/tGbAOYkpL0o=\");\n\n_c = Modals;\nconst StyledModalWrapper = styled.div`\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 10;\n  overflow-y: auto;\n  background-color: rgba(0, 0, 0, 0.45);\n`;\n_c2 = StyledModalWrapper;\nconst ModalContent = styled.div`\n  display: flex;\n  justify-content: center;\n  width: 100%;\n  align-items: center;\n  padding: 20px 0;\n  min-height: 100vh;\n`;\n_c3 = ModalContent;\nconst StyledBackdrop = styled.div`\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n`;\n_c4 = StyledBackdrop;\nexport default Modals;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"Modals\");\n$RefreshReg$(_c2, \"StyledModalWrapper\");\n$RefreshReg$(_c3, \"ModalContent\");\n$RefreshReg$(_c4, \"StyledBackdrop\");","map":{"version":3,"sources":["/Users/ivopascoal/Desktop/cuffies/src/contexts/Modals/Modals.tsx"],"names":["React","createContext","useCallback","useState","styled","v4","Context","onPresent","onDismiss","modalSetter","info","state","existed","id","some","x","map","item","Modals","children","modals","setModals","handlePresent","modalContent","backdropClick","content","handleDismiss","data","filter","t","length","slice","modal","undefined","isValidElement","cloneElement","StyledModalWrapper","div","ModalContent","StyledBackdrop"],"mappings":";;;AAAA;AACA,OAAOA,KAAP,IAAgBC,aAAhB,EAA0CC,WAA1C,EAAuDC,QAAvD,QAAuE,OAAvE;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,SAASC,EAAT,QAAmB,MAAnB;;AAQA,OAAO,MAAMC,OAAO,gBAAGL,aAAa,CAAgB;AAClDM,EAAAA,SAAS,EAAE,MAAM,EADiC;AAElDC,EAAAA,SAAS,EAAE,MAAM,CAAE;AAF+B,CAAhB,CAA7B;;AAWP,MAAMC,WAAW,GAAIC,IAAD,IAAsBC,KAAD,IAAqC;AAC5E,QAAMC,OAAO,GAAGF,IAAI,CAACG,EAAL,IAAWF,KAAK,CAACG,IAAN,CAAYC,CAAD,IAAOA,CAAC,CAACF,EAAF,KAASH,IAAI,CAACG,EAAhC,CAA3B;;AACA,MAAI,CAACD,OAAL,EAAc;AACZ,WAAO,CAAC,GAAGD,KAAJ,EAAWD,IAAX,CAAP;AACD;;AAED,SAAOC,KAAK,CAACK,GAAN,CAAWC,IAAD,IAAWA,IAAI,CAACJ,EAAL,KAAYH,IAAI,CAACG,EAAjB,GAAsBI,IAAtB,GAA6BP,IAAlD,CAAP;AACD,CAPD;;AASA,MAAMQ,MAAgB,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAkB;AAAA;;AACzC,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBlB,QAAQ,CAAc,EAAd,CAApC;AAEA,QAAMmB,aAAa,GAAGpB,WAAW,CAC/B,CAACqB,YAAD,EAAgCC,aAAhC,EAAyDX,EAAzD,KAAyE;AACvEA,IAAAA,EAAE,GAAGA,EAAE,IAAIR,EAAE,EAAb;AACAgB,IAAAA,SAAS,CAACZ,WAAW,CAAC;AAAEI,MAAAA,EAAF;AAAMY,MAAAA,OAAO,EAAEF,YAAf;AAA6BC,MAAAA;AAA7B,KAAD,CAAZ,CAAT;AACA,WAAOX,EAAP;AACD,GAL8B,EAM/B,EAN+B,CAAjC;AASA,QAAMa,aAAa,GAAGxB,WAAW,CAAEW,EAAD,IAAgB;AAChDQ,IAAAA,SAAS,CAAEM,IAAD,IAAUA,IAAI,CAACC,MAAL,CAAaC,CAAD,IAAOA,CAAC,CAAChB,EAAF,KAASA,EAA5B,CAAX,CAAT;AACD,GAFgC,EAE9B,EAF8B,CAAjC;AAIA,QAAMW,aAAa,GAAGtB,WAAW,CAAC,MAAM;AACtC,QAAIkB,MAAM,CAACU,MAAP,KAAkB,CAAtB,EAAyB;AACvB;AACD;;AACDT,IAAAA,SAAS,CAAEM,IAAD,IAAUA,IAAI,CAACI,KAAL,CAAW,CAAX,EAAcJ,IAAI,CAACG,MAAL,GAAc,CAA5B,CAAX,CAAT;AACD,GALgC,EAK9B,CAACV,MAAD,CAL8B,CAAjC;AAOA,sBACE,QAAC,OAAD,CAAS,QAAT;AACE,IAAA,KAAK,EAAE;AACLK,MAAAA,OAAO,EAAEL,MADJ;AAELb,MAAAA,SAAS,EAAEe,aAFN;AAGLd,MAAAA,SAAS,EAAEkB;AAHN,KADT;AAAA,eAOGP,QAPH,EAQGC,MARH,aAQGA,MARH,uBAQGA,MAAM,CAAEJ,GAAR,CAAagB,KAAD,iBACX,QAAC,kBAAD;AAAA,8BACE,QAAC,cAAD;AAAgB,QAAA,OAAO,EAAEA,KAAK,CAACR,aAAN,GAAsBA,aAAtB,GAAsCS;AAA/D;AAAA;AAAA;AAAA;AAAA,cADF,eAEE,QAAC,YAAD;AAAA,kBACG,aAAAjC,KAAK,CAACkC,cAAN,CAAqBF,KAAK,CAACP,OAA3B,kBACCzB,KAAK,CAACmC,YAAN,CAAmBH,KAAK,CAACP,OAAzB,EAAkC;AAChCjB,UAAAA,SAAS,EAAE,MAAMkB,aAAa,CAACM,KAAK,CAACnB,EAAP;AADE,SAAlC;AAFJ;AAAA;AAAA;AAAA;AAAA,cAFF;AAAA,OAAyBmB,KAAK,CAACnB,EAA/B;AAAA;AAAA;AAAA;AAAA,YADD,CARH;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAsBD,CA7CD;;GAAMK,M;;KAAAA,M;AA+CN,MAAMkB,kBAAkB,GAAGhC,MAAM,CAACiC,GAAI;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CATA;MAAMD,kB;AAWN,MAAME,YAAY,GAAGlC,MAAM,CAACiC,GAAI;AAChC;AACA;AACA;AACA;AACA;AACA;AACA,CAPA;MAAMC,Y;AASN,MAAMC,cAAc,GAAGnC,MAAM,CAACiC,GAAI;AAClC;AACA;AACA;AACA;AACA;AACA,CANA;MAAME,c;AAQN,eAAerB,MAAf","sourcesContent":["/* eslint-disable @typescript-eslint/no-empty-function */\nimport React, { createContext, ReactNode, useCallback, useState } from 'react';\nimport styled from 'styled-components';\nimport { v4 } from 'uuid';\n\ninterface ModalsContext {\n  content?: ModalInfo[];\n  onPresent: (content: React.ReactNode, backdropClick?: boolean, id?: string) => string;\n  onDismiss: (id: string) => void;\n}\n\nexport const Context = createContext<ModalsContext>({\n  onPresent: () => '',\n  onDismiss: () => {},\n});\n\ninterface ModalInfo {\n  id: string;\n  content?: React.ReactNode;\n  backdropClick?: boolean;\n}\n\nconst modalSetter = (info: ModalInfo) => (state: ModalInfo[]): ModalInfo[] => {\n  const existed = info.id && state.some((x) => x.id === info.id);\n  if (!existed) {\n    return [...state, info];\n  }\n\n  return state.map((item) => (item.id !== info.id ? item : info));\n};\n\nconst Modals: React.FC = ({ children }) => {\n  const [modals, setModals] = useState<ModalInfo[]>([]);\n\n  const handlePresent = useCallback(\n    (modalContent: React.ReactNode, backdropClick?: boolean, id?: string) => {\n      id = id || v4();\n      setModals(modalSetter({ id, content: modalContent, backdropClick }));\n      return id;\n    },\n    [],\n  );\n\n  const handleDismiss = useCallback((id: string) => {\n    setModals((data) => data.filter((t) => t.id !== id));\n  }, []);\n\n  const backdropClick = useCallback(() => {\n    if (modals.length === 0) {\n      return;\n    }\n    setModals((data) => data.slice(0, data.length - 1));\n  }, [modals]);\n\n  return (\n    <Context.Provider\n      value={{\n        content: modals,\n        onPresent: handlePresent,\n        onDismiss: handleDismiss,\n      }}\n    >\n      {children}\n      {modals?.map((modal) => (\n        <StyledModalWrapper key={modal.id}>\n          <StyledBackdrop onClick={modal.backdropClick ? backdropClick : undefined} />\n          <ModalContent>\n            {React.isValidElement(modal.content) &&\n              React.cloneElement(modal.content, {\n                onDismiss: () => handleDismiss(modal.id),\n              })}\n          </ModalContent>\n        </StyledModalWrapper>\n      ))}\n    </Context.Provider>\n  );\n};\n\nconst StyledModalWrapper = styled.div`\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 10;\n  overflow-y: auto;\n  background-color: rgba(0, 0, 0, 0.45);\n`;\n\nconst ModalContent = styled.div`\n  display: flex;\n  justify-content: center;\n  width: 100%;\n  align-items: center;\n  padding: 20px 0;\n  min-height: 100vh;\n`;\n\nconst StyledBackdrop = styled.div`\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n`;\n\nexport default Modals;\n"]},"metadata":{},"sourceType":"module"}