{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/ivopascoal/Desktop/cuffies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _slicedToArray from\"/Users/ivopascoal/Desktop/cuffies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _toConsumableArray from\"/Users/ivopascoal/Desktop/cuffies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";var _templateObject,_templateObject2,_templateObject3;/* eslint-disable @typescript-eslint/no-empty-function */import React,{createContext,useCallback,useState}from'react';import styled from'styled-components';import{v4}from'uuid';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Context=/*#__PURE__*/createContext({onPresent:function onPresent(){return'';},onDismiss:function onDismiss(){}});var modalSetter=function modalSetter(info){return function(state){var existed=info.id&&state.some(function(x){return x.id===info.id;});if(!existed){return[].concat(_toConsumableArray(state),[info]);}return state.map(function(item){return item.id!==info.id?item:info;});};};var Modals=function Modals(_ref){var children=_ref.children;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),modals=_useState2[0],setModals=_useState2[1];var handlePresent=useCallback(function(modalContent,backdropClick,id){id=id||v4();setModals(modalSetter({id:id,content:modalContent,backdropClick:backdropClick}));return id;},[]);var handleDismiss=useCallback(function(id){setModals(function(data){return data.filter(function(t){return t.id!==id;});});},[]);var backdropClick=useCallback(function(){if(modals.length===0){return;}setModals(function(data){return data.slice(0,data.length-1);});},[modals]);return/*#__PURE__*/_jsxs(Context.Provider,{value:{content:modals,onPresent:handlePresent,onDismiss:handleDismiss},children:[children,modals===null||modals===void 0?void 0:modals.map(function(modal){return/*#__PURE__*/_jsxs(StyledModalWrapper,{children:[/*#__PURE__*/_jsx(StyledBackdrop,{onClick:modal.backdropClick?backdropClick:undefined}),/*#__PURE__*/_jsx(ModalContent,{children:/*#__PURE__*/React.isValidElement(modal.content)&&/*#__PURE__*/React.cloneElement(modal.content,{onDismiss:function onDismiss(){return handleDismiss(modal.id);}})})]},modal.id);})]});};var StyledModalWrapper=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  position: fixed;\\n  top: 0;\\n  right: 0;\\n  bottom: 0;\\n  left: 0;\\n  z-index: 10;\\n  overflow-y: auto;\\n  background-color: rgba(0, 0, 0, 0.45);\\n\"])));var ModalContent=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: center;\\n  width: 100%;\\n  align-items: center;\\n  padding: 20px 0;\\n  min-height: 100vh;\\n\"])));var StyledBackdrop=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  position: absolute;\\n  top: 0;\\n  right: 0;\\n  bottom: 0;\\n  left: 0;\\n\"])));export default Modals;","map":{"version":3,"sources":["/Users/ivopascoal/Desktop/cuffies/src/contexts/Modals/Modals.tsx"],"names":["React","createContext","useCallback","useState","styled","v4","Context","onPresent","onDismiss","modalSetter","info","state","existed","id","some","x","map","item","Modals","children","modals","setModals","handlePresent","modalContent","backdropClick","content","handleDismiss","data","filter","t","length","slice","modal","undefined","isValidElement","cloneElement","StyledModalWrapper","div","ModalContent","StyledBackdrop"],"mappings":"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","sourcesContent":["/* eslint-disable @typescript-eslint/no-empty-function */\nimport React, { createContext, ReactNode, useCallback, useState } from 'react';\nimport styled from 'styled-components';\nimport { v4 } from 'uuid';\n\ninterface ModalsContext {\n  content?: ModalInfo[];\n  onPresent: (content: React.ReactNode, backdropClick?: boolean, id?: string) => string;\n  onDismiss: (id: string) => void;\n}\n\nexport const Context = createContext<ModalsContext>({\n  onPresent: () => '',\n  onDismiss: () => {},\n});\n\ninterface ModalInfo {\n  id: string;\n  content?: React.ReactNode;\n  backdropClick?: boolean;\n}\n\nconst modalSetter = (info: ModalInfo) => (state: ModalInfo[]): ModalInfo[] => {\n  const existed = info.id && state.some((x) => x.id === info.id);\n  if (!existed) {\n    return [...state, info];\n  }\n\n  return state.map((item) => (item.id !== info.id ? item : info));\n};\n\nconst Modals: React.FC = ({ children }) => {\n  const [modals, setModals] = useState<ModalInfo[]>([]);\n\n  const handlePresent = useCallback(\n    (modalContent: React.ReactNode, backdropClick?: boolean, id?: string) => {\n      id = id || v4();\n      setModals(modalSetter({ id, content: modalContent, backdropClick }));\n      return id;\n    },\n    [],\n  );\n\n  const handleDismiss = useCallback((id: string) => {\n    setModals((data) => data.filter((t) => t.id !== id));\n  }, []);\n\n  const backdropClick = useCallback(() => {\n    if (modals.length === 0) {\n      return;\n    }\n    setModals((data) => data.slice(0, data.length - 1));\n  }, [modals]);\n\n  return (\n    <Context.Provider\n      value={{\n        content: modals,\n        onPresent: handlePresent,\n        onDismiss: handleDismiss,\n      }}\n    >\n      {children}\n      {modals?.map((modal) => (\n        <StyledModalWrapper key={modal.id}>\n          <StyledBackdrop onClick={modal.backdropClick ? backdropClick : undefined} />\n          <ModalContent>\n            {React.isValidElement(modal.content) &&\n              React.cloneElement(modal.content, {\n                onDismiss: () => handleDismiss(modal.id),\n              })}\n          </ModalContent>\n        </StyledModalWrapper>\n      ))}\n    </Context.Provider>\n  );\n};\n\nconst StyledModalWrapper = styled.div`\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 10;\n  overflow-y: auto;\n  background-color: rgba(0, 0, 0, 0.45);\n`;\n\nconst ModalContent = styled.div`\n  display: flex;\n  justify-content: center;\n  width: 100%;\n  align-items: center;\n  padding: 20px 0;\n  min-height: 100vh;\n`;\n\nconst StyledBackdrop = styled.div`\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n`;\n\nexport default Modals;\n"]},"metadata":{},"sourceType":"module"}