{"ast":null,"code":"import _regeneratorRuntime from\"/Users/ivopascoal/Desktop/cuffies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/ivopascoal/Desktop/cuffies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/ivopascoal/Desktop/cuffies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useCallback,useEffect,useState}from'react';import{useWeb3React}from'@web3-react/core';var useAllowance=function useAllowance(token,spender,pendingApproval){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),allowance=_useState2[0],setAllowance=_useState2[1];var _useWeb3React=useWeb3React(),account=_useWeb3React.account;var fetchAllowance=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var allowance;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return token.allowance(account,spender);case 2:allowance=_context.sent;setAllowance(allowance);case 4:case\"end\":return _context.stop();}}},_callee);})),[account,spender,token,setAllowance]);useEffect(function(){if(account&&spender&&token){fetchAllowance().catch(function(err){return console.warn(\"Failed to fetch allowance: \".concat(err.stack));});}},[account,spender,token,pendingApproval,fetchAllowance]);return{allowance:allowance,fetchAllowance:fetchAllowance};};export default useAllowance;","map":{"version":3,"sources":["/Users/ivopascoal/Desktop/cuffies/src/hooks/useAllowance.ts"],"names":["useCallback","useEffect","useState","useWeb3React","useAllowance","token","spender","pendingApproval","allowance","setAllowance","account","fetchAllowance","catch","err","console","warn","stack"],"mappings":"qcAAA,OAASA,WAAT,CAAsBC,SAAtB,CAAiCC,QAAjC,KAAiD,OAAjD,CAGA,OAASC,YAAT,KAA6B,kBAA7B,CAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,KAAD,CAAeC,OAAf,CAAgCC,eAAhC,CAA8D,CACjF,cAAkCL,QAAQ,CAAY,IAAZ,CAA1C,wCAAOM,SAAP,eAAkBC,YAAlB,eACA,kBAAoBN,YAAY,EAAhC,CAAQO,OAAR,eAAQA,OAAR,CAEA,GAAMC,CAAAA,cAAc,CAAGX,WAAW,sEAAC,uKACTK,CAAAA,KAAK,CAACG,SAAN,CAAgBE,OAAhB,CAAyBJ,OAAzB,CADS,QAC3BE,SAD2B,eAEjCC,YAAY,CAACD,SAAD,CAAZ,CAFiC,sDAAD,GAG/B,CAACE,OAAD,CAAUJ,OAAV,CAAmBD,KAAnB,CAA0BI,YAA1B,CAH+B,CAAlC,CAKAR,SAAS,CAAC,UAAM,CACd,GAAIS,OAAO,EAAIJ,OAAX,EAAsBD,KAA1B,CAAiC,CAC/BM,cAAc,GAAGC,KAAjB,CAAuB,SAACC,GAAD,QAASC,CAAAA,OAAO,CAACC,IAAR,sCAA2CF,GAAG,CAACG,KAA/C,EAAT,EAAvB,EACD,CACF,CAJQ,CAIN,CAACN,OAAD,CAAUJ,OAAV,CAAmBD,KAAnB,CAA0BE,eAA1B,CAA2CI,cAA3C,CAJM,CAAT,CAMA,MAAO,CAAEH,SAAS,CAATA,SAAF,CAAaG,cAAc,CAAdA,cAAb,CAAP,CACD,CAhBD,CAkBA,cAAeP,CAAAA,YAAf","sourcesContent":["import { useCallback, useEffect, useState } from 'react';\nimport { BigNumber } from '@ethersproject/bignumber';\nimport ERC20 from '../diamondhand/ERC20';\nimport { useWeb3React } from '@web3-react/core';\n\nconst useAllowance = (token: ERC20, spender: string, pendingApproval?: boolean) => {\n  const [allowance, setAllowance] = useState<BigNumber>(null);\n  const { account } = useWeb3React();\n\n  const fetchAllowance = useCallback(async () => {\n    const allowance = await token.allowance(account, spender);\n    setAllowance(allowance);\n  }, [account, spender, token, setAllowance]);\n\n  useEffect(() => {\n    if (account && spender && token) {\n      fetchAllowance().catch((err) => console.warn(`Failed to fetch allowance: ${err.stack}`));\n    }\n  }, [account, spender, token, pendingApproval, fetchAllowance]);\n\n  return { allowance, fetchAllowance };\n};\n\nexport default useAllowance;\n"]},"metadata":{},"sourceType":"module"}