{"ast":null,"code":"var _jsxFileName = \"/Users/ivopascoal/Desktop/PeepoAvax/src/views/Metaverse/ButtonStake.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { ButtonAction } from 'src/components/ButtonAction';\nimport styled from 'styled-components';\nimport useDiamondHand from 'src/hooks/useDiamondHand';\nimport useHandleTransactionReceipt from 'src/hooks/useHandleTransactionReceipt';\nimport { useConfiguration } from 'src/contexts/ConfigProvider/ConfigProvider';\nimport { useTokenBalance } from 'src/contexts/AccountBalanceProvider/AccountBalanceProvider';\nimport useApprove, { ApprovalState } from 'src/hooks/useApprove';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar ButtonStatus;\n\n(function (ButtonStatus) {\n  ButtonStatus[ButtonStatus[\"notConnected\"] = 1] = \"notConnected\";\n  ButtonStatus[ButtonStatus[\"insufficient\"] = 2] = \"insufficient\";\n  ButtonStatus[ButtonStatus[\"requireApproval\"] = 3] = \"requireApproval\";\n  ButtonStatus[ButtonStatus[\"approvalPending\"] = 4] = \"approvalPending\";\n  ButtonStatus[ButtonStatus[\"paused\"] = 15] = \"paused\";\n  ButtonStatus[ButtonStatus[\"ready\"] = 20] = \"ready\";\n  ButtonStatus[ButtonStatus[\"notEnough\"] = 21] = \"notEnough\";\n})(ButtonStatus || (ButtonStatus = {}));\n\nexport const ButtonStake = ({\n  amount\n}) => {\n  _s();\n\n  const dh = useDiamondHand();\n  const handleTransactionReceipt = useHandleTransactionReceipt();\n  const config = useConfiguration();\n  const [token, setToken] = useState();\n  const balance = useTokenBalance(token);\n  useEffect(() => {\n    if (!dh || token) return;\n    setToken(dh.PEEPOQUEST);\n  }, [dh, token]);\n  const buyAddress = useMemo(() => {\n    var _config$addresses;\n\n    if (!config) {\n      return;\n    }\n\n    return config === null || config === void 0 ? void 0 : (_config$addresses = config.addresses) === null || _config$addresses === void 0 ? void 0 : _config$addresses.MasterChef;\n  }, [config]);\n  const [approvalTokenState, approveToken] = useApprove(token, buyAddress);\n\n  const stake = async () => {\n    try {\n      var _dh$MASTERCHEF;\n\n      console.log(amount);\n      const tx = await handleTransactionReceipt((_dh$MASTERCHEF = dh.MASTERCHEF) === null || _dh$MASTERCHEF === void 0 ? void 0 : _dh$MASTERCHEF.faucet(amount), `Stake`);\n\n      if (tx && tx.response) {\n        await tx.response.wait();\n        tx.hideModal();\n      }\n    } catch {//\n    }\n  };\n\n  const status = useMemo(() => {\n    if (approvalTokenState == ApprovalState.PENDING) {\n      return ButtonStatus.approvalPending;\n    }\n\n    if (approvalTokenState !== ApprovalState.APPROVED) {\n      return ButtonStatus.requireApproval;\n    }\n\n    return ButtonStatus.ready;\n  }, [approvalTokenState, balance]);\n  const buttonText = useMemo(() => {\n    switch (status) {\n      case ButtonStatus.approvalPending:\n        return `Approving ${token === null || token === void 0 ? void 0 : token.symbol}...`;\n\n      case ButtonStatus.requireApproval:\n        return 'Approve';\n\n      default:\n        return 'Order';\n    }\n  }, [status, token]);\n  const onClickBuy = useCallback(async () => {\n    switch (status) {\n      case ButtonStatus.requireApproval:\n        await approveToken();\n        break;\n\n      case ButtonStatus.approvalPending:\n        break;\n\n      case ButtonStatus.ready:\n        stake();\n        break;\n    }\n  }, [status, approveToken, stake]);\n  return /*#__PURE__*/_jsxDEV(StyledButtonAction, {\n    onClick: stake,\n    children: /*#__PURE__*/_jsxDEV(StyledText, {\n      children: \"VerifY!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 100,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ButtonStake, \"VZi4ktHUEcwCsTrBnPC/PSw0SM4=\", false, function () {\n  return [useDiamondHand, useHandleTransactionReceipt, useConfiguration, useTokenBalance, useApprove];\n});\n\n_c = ButtonStake;\nconst StyledButtonAction = styled(ButtonAction)`\n  display: inline-block;\n  width: initial;\n  text-color: #f4b5d2;\n\n  background-color: #5a8f35;\n  :hover {\n    background-color: #a1118b;\n  }\n`;\n_c2 = StyledButtonAction;\nconst StyledText = styled.div`\n\n  font-size: 20px;\n  background: -webkit-linear-gradient(#e7d58b, #dfb771);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n\n  }\n`;\n_c3 = StyledText;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"ButtonStake\");\n$RefreshReg$(_c2, \"StyledButtonAction\");\n$RefreshReg$(_c3, \"StyledText\");","map":{"version":3,"sources":["/Users/ivopascoal/Desktop/PeepoAvax/src/views/Metaverse/ButtonStake.tsx"],"names":["React","useCallback","useEffect","useMemo","useState","ButtonAction","styled","useDiamondHand","useHandleTransactionReceipt","useConfiguration","useTokenBalance","useApprove","ApprovalState","ButtonStatus","ButtonStake","amount","dh","handleTransactionReceipt","config","token","setToken","balance","PEEPOQUEST","buyAddress","addresses","MasterChef","approvalTokenState","approveToken","stake","console","log","tx","MASTERCHEF","faucet","response","wait","hideModal","status","PENDING","approvalPending","APPROVED","requireApproval","ready","buttonText","symbol","onClickBuy","StyledButtonAction","StyledText","div"],"mappings":"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","sourcesContent":["import React, { forwardRef, useCallback, useEffect, useMemo, useState } from 'react';\nimport { ButtonAction } from 'src/components/ButtonAction';\nimport { BigNumber } from '@ethersproject/bignumber';\nimport styled from 'styled-components';\nimport useDiamondHand from 'src/hooks/useDiamondHand';\nimport useHandleTransactionReceipt from 'src/hooks/useHandleTransactionReceipt';\nimport { useConfiguration } from 'src/contexts/ConfigProvider/ConfigProvider';\nimport { useTokenBalance } from 'src/contexts/AccountBalanceProvider/AccountBalanceProvider';\nimport useApprove, { ApprovalState } from 'src/hooks/useApprove';\nimport ERC20 from 'src/diamondhand/ERC20';\n\nenum ButtonStatus {\n  notConnected = 1,\n  insufficient = 2,\n  requireApproval = 3,\n  approvalPending = 4,\n  paused = 15,\n  ready = 20,\n  notEnough = 21,\n}\n\ninterface ButtonStakeProps {\n  amount?: BigNumber;\n}\n\nexport const ButtonStake: React.ForwardRefRenderFunction<unknown, ButtonStakeProps> = ({\n  amount,\n}) => {\n  const dh = useDiamondHand();\n  const handleTransactionReceipt = useHandleTransactionReceipt();\n  const config = useConfiguration();\n  const [token, setToken] = useState<ERC20 | undefined>();\n  const balance = useTokenBalance(token);\n\n  useEffect(() => {\n    if (!dh || token) return;\n    setToken(dh.PEEPOQUEST);\n  }, [dh, token]);\n\n  const buyAddress = useMemo(() => {\n    if (!config) {\n      return;\n    }\n    return config?.addresses?.MasterChef;\n  }, [config]);\n\n  const [approvalTokenState, approveToken] = useApprove(token, buyAddress);\n\n  const stake = async () => {\n    try {\n      console.log(amount);\n      const tx = await handleTransactionReceipt(dh.MASTERCHEF?.faucet(amount), `Stake`);\n      if (tx && tx.response) {\n        await tx.response.wait();\n        tx.hideModal();\n      }\n    } catch {\n      //\n    }\n  };\n\n  const status = useMemo(() => {\n    if (approvalTokenState == ApprovalState.PENDING) {\n      return ButtonStatus.approvalPending;\n    }\n\n    if (approvalTokenState !== ApprovalState.APPROVED) {\n      return ButtonStatus.requireApproval;\n    }\n\n    return ButtonStatus.ready;\n  }, [approvalTokenState, balance]);\n\n  const buttonText = useMemo(() => {\n    switch (status) {\n      case ButtonStatus.approvalPending:\n        return `Approving ${token?.symbol}...`;\n\n      case ButtonStatus.requireApproval:\n        return 'Approve';\n      default:\n        return 'Order';\n    }\n  }, [status, token]);\n\n  const onClickBuy = useCallback(async () => {\n    switch (status) {\n      case ButtonStatus.requireApproval:\n        await approveToken();\n        break;\n      case ButtonStatus.approvalPending:\n        break;\n      case ButtonStatus.ready:\n        stake();\n        break;\n    }\n  }, [status, approveToken, stake]);\n\n  return (\n    <StyledButtonAction onClick={stake}>\n      <StyledText>VerifY!</StyledText>\n    </StyledButtonAction>\n  );\n};\n\nconst StyledButtonAction = styled(ButtonAction)`\n  display: inline-block;\n  width: initial;\n  text-color: #f4b5d2;\n\n  background-color: #5a8f35;\n  :hover {\n    background-color: #a1118b;\n  }\n`;\nconst StyledText = styled.div`\n\n  font-size: 20px;\n  background: -webkit-linear-gradient(#e7d58b, #dfb771);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n\n  }\n`;\n"]},"metadata":{},"sourceType":"module"}