{"ast":null,"code":"\"use strict\";\n\nfunction promisify(f, thisContext) {\n  return function () {\n    let args = Array.prototype.slice.call(arguments);\n    return new Promise((resolve, reject) => {\n      args.push((err, result) => err !== null ? reject(err) : resolve(result));\n      f.apply(thisContext, args);\n    });\n  };\n}\n\nexports.promisify = promisify;\n\nfunction map(elts, f) {\n  let apply = appElts => Promise.all(appElts.map(elt => typeof elt.then === 'function' ? elt.then(f) : f(elt)));\n\n  return typeof elts.then === 'function' ? elts.then(apply) : apply(elts);\n}\n\nexports.map = map;\n\nfunction _try(f, thisContext) {\n  let args = Array.prototype.slice.call(arguments);\n  return new Promise((res, rej) => {\n    try {\n      args.shift();\n      res(f.apply(thisContext, args));\n    } catch (err) {\n      rej(err);\n    }\n  });\n}\n\nexports._try = _try;","map":{"version":3,"sources":["index.ts"],"names":[],"mappings":";;AAOA,SAAA,SAAA,CAA0B,CAA1B,EAAkC,WAAlC,EAAmD;AAC/C,SAAO,YAAA;AACH,QAAI,IAAI,GAAG,KAAK,CAAC,SAAN,CAAgB,KAAhB,CAAsB,IAAtB,CAA2B,SAA3B,CAAX;AACA,WAAO,IAAI,OAAJ,CAAY,CAAC,OAAD,EAAU,MAAV,KAAgB;AAC/B,MAAA,IAAI,CAAC,IAAL,CAAU,CAAC,GAAD,EAAW,MAAX,KAA2B,GAAG,KAAK,IAAR,GAAe,MAAM,CAAC,GAAD,CAArB,GAA6B,OAAO,CAAC,MAAD,CAAzE;AACA,MAAA,CAAC,CAAC,KAAF,CAAQ,WAAR,EAAqB,IAArB;AACH,KAHM,CAAP;AAIH,GAND;AAOH;;AARD,OAAA,CAAA,SAAA,GAAA,SAAA;;AAeA,SAAA,GAAA,CAAoB,IAApB,EAA+B,CAA/B,EAAqC;AACjC,MAAI,KAAK,GAAI,OAAD,IAAkB,OAAO,CAAC,GAAR,CAAY,OAAO,CAAC,GAAR,CAAa,GAAD,IAAc,OAAO,GAAG,CAAC,IAAX,KAAoB,UAApB,GAAiC,GAAG,CAAC,IAAJ,CAAS,CAAT,CAAjC,GAA+C,CAAC,CAAC,GAAD,CAA1E,CAAZ,CAA9B;;AACA,SAAO,OAAO,IAAI,CAAC,IAAZ,KAAqB,UAArB,GAAkC,IAAI,CAAC,IAAL,CAAU,KAAV,CAAlC,GAAqD,KAAK,CAAC,IAAD,CAAjE;AACH;;AAHD,OAAA,CAAA,GAAA,GAAA,GAAA;;AAWA,SAAA,IAAA,CAAqB,CAArB,EAA6B,WAA7B,EAA8C;AAC1C,MAAI,IAAI,GAAG,KAAK,CAAC,SAAN,CAAgB,KAAhB,CAAsB,IAAtB,CAA2B,SAA3B,CAAX;AACA,SAAO,IAAI,OAAJ,CAAY,CAAC,GAAD,EAAM,GAAN,KAAS;AACxB,QAAI;AACA,MAAA,IAAI,CAAC,KAAL;AACA,MAAA,GAAG,CAAC,CAAC,CAAC,KAAF,CAAQ,WAAR,EAAqB,IAArB,CAAD,CAAH;AACH,KAHD,CAGE,OAAO,GAAP,EAAY;AACV,MAAA,GAAG,CAAC,GAAD,CAAH;AACH;AACJ,GAPM,CAAP;AAQH;;AAVD,OAAA,CAAA,IAAA,GAAA,IAAA","sourceRoot":"","sourcesContent":["\"use strict\";\nfunction promisify(f, thisContext) {\n    return function () {\n        let args = Array.prototype.slice.call(arguments);\n        return new Promise((resolve, reject) => {\n            args.push((err, result) => err !== null ? reject(err) : resolve(result));\n            f.apply(thisContext, args);\n        });\n    };\n}\nexports.promisify = promisify;\nfunction map(elts, f) {\n    let apply = (appElts) => Promise.all(appElts.map((elt) => typeof elt.then === 'function' ? elt.then(f) : f(elt)));\n    return typeof elts.then === 'function' ? elts.then(apply) : apply(elts);\n}\nexports.map = map;\nfunction _try(f, thisContext) {\n    let args = Array.prototype.slice.call(arguments);\n    return new Promise((res, rej) => {\n        try {\n            args.shift();\n            res(f.apply(thisContext, args));\n        }\n        catch (err) {\n            rej(err);\n        }\n    });\n}\nexports._try = _try;\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"script"}